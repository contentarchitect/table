!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@contentarchitect/editor")):"function"==typeof define&&define.amd?define(["@contentarchitect/editor"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).Table=e(t.ContentArchitect)}(this,(function(t){"use strict";function e(t,e,a,n,o,s,i,r,c,l){"boolean"!=typeof i&&(c=r,r=i,i=!1);const d="function"==typeof a?a.options:a;let h;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),s?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=h):e&&(h=i?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),h)if(d.functional){const t=d.render;d.render=function(e,a){return h.call(a),t(e,a)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,h):[h]}return a}const a=e({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("caption",{directives:[{name:"edit",rawName:"v-edit:[captionSettings]",value:t.value.caption,expression:"value.caption",arg:t.captionSettings}]}),t._v(" "),t.value.thead?a("thead",[a("tr",t._l(t.value.data[0],(function(e,n){return a("th",{directives:[{name:"edit",rawName:"v-edit.block.complex",value:{obj:t.value.data[0][n],exp:"value"},expression:"{ obj: value.data[0][i], exp: 'value' }",modifiers:{block:!0,complex:!0}}],key:n})})),0)]):t._e(),t._v(" "),a("tbody",t._l(t.tbody,(function(e,n){return a("tr",{key:e.id},t._l(e,(function(e,o){return a("td",{directives:[{name:"edit",rawName:"v-edit.block.complex",value:{obj:t.tbody[n][o],exp:"value"},expression:"{ obj: tbody[i][j], exp: 'value' }",modifiers:{block:!0,complex:!0}}],key:o})})),0)})),0)])},staticRenderFns:[]},undefined,{props:["value"],directives:{edit:t.EditDirective},data:()=>({captionSettings:{placeholder:"Table caption"}}),created(){this.value.data.forEach(t=>{t.id=Math.random()})},methods:{randomKey:()=>Math.random()},computed:{tbody(){return this.value.thead?this.value.data.slice(1,this.value.data.length):this.value.data}}},undefined,false,undefined,!0,void 0,void 0,void 0);var n={functional:!0,render(t,e){const{_c:a,_v:n,data:o,children:s=[]}=e,{class:i,staticClass:r,style:c,staticStyle:l,attrs:d={},...h}=o;return a("svg",{class:[i,r],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"36",width:"36"},d),...h},s.concat([a("path",{attrs:{d:"M29 16h-9V7a1 1 0 00-1-1h-2a1 1 0 00-1 1v9H7a1 1 0 00-1 1v2a1 1 0 001 1h9v9a1 1 0 001 1h2a1 1 0 001-1v-9h9a1 1 0 001-1v-2a1 1 0 00-1-1z"}})]))}},o={functional:!0,render(t,e){const{_c:a,_v:n,data:o,children:s=[]}=e,{class:i,staticClass:r,style:c,staticStyle:l,attrs:d={},...h}=o;return a("svg",{class:[i,r],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"36",width:"36"},d),...h},s.concat([a("rect",{attrs:{height:"4",rx:"1",ry:"1",width:"24",x:"6",y:"16"}})]))}};function s(t,e){return(t,a)=>function(t,e){const a=function(t){var e=document.createElement("style");return e.type="text/css",t.appendChild(e),e}(e);t.media&&a.setAttribute("media",t.media);if("styleSheet"in a)a.styleSheet.cssText=t.source;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(t.source))}}(a,e)}const i=e({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("css-grid",{attrs:{columns:["2fr","3fr"],gap:"8px 0"}},[a("label",{attrs:{for:""}},[t._v("Cols")]),t._v(" "),a("div",{staticClass:"table-control"},[a("sp-action-button",{on:{click:t.decreaseColsCount}},[a("sp-icon",{attrs:{icon:t.$options.components.Remove}})],1),t._v(" "),a("span",[t._v(t._s(t.cols))]),t._v(" "),a("sp-action-button",{on:{click:t.increaseColsCount}},[a("sp-icon",{attrs:{icon:t.$options.components.Add}})],1)],1),t._v(" "),a("label",{attrs:{for:""}},[t._v("Rows")]),t._v(" "),a("div",{staticClass:"table-control"},[a("sp-action-button",{on:{click:t.decreaseRowsCount}},[a("sp-icon",{attrs:{icon:t.$options.components.Remove}})],1),t._v(" "),a("span",[t._v(t._s(t.rows))]),t._v(" "),a("sp-action-button",{on:{click:t.increaseRowsCount}},[a("sp-icon",{attrs:{icon:t.$options.components.Add}})],1)],1),t._v(" "),a("label",{attrs:{for:""}},[t._v("Table head")]),t._v(" "),a("div",{staticClass:"table-control"},[a("sp-switch",{model:{value:t.value.thead,callback:function(e){t.$set(t.value,"thead",e)},expression:"value.thead"}})],1)])},staticRenderFns:[]},(function(t){t&&t("data-v-0ef8be3e_0",{source:".table-control[data-v-0ef8be3e]{display:flex;align-items:center}.table-control span[data-v-0ef8be3e]{flex:1;display:flex;justify-content:center;align-items:center}",map:void 0,media:void 0})}),{components:{CssGrid:t.CssGrid,SpSwitch:t.SpSwitch,SpIcon:t.SpIcon,SpActionButton:t.SpActionButton,Add:n,Remove:o},props:["value"],data:()=>({emptyCell:{value:""}}),computed:{rows(){return this.value.data.length},cols(){return this.value.data[0].length}},methods:{increaseColsCount(){this.value.data.forEach((t,e)=>{t.push({...this.emptyCell})})},decreaseColsCount(){this.value.data.forEach((t,e)=>t.pop())},increaseRowsCount(){const t=Array(this.cols).fill().map(()=>({...this.emptyCell}));t.id=Math.random(),this.value.data.push(t)},decreaseRowsCount(){this.value.data.pop()}}},"data-v-0ef8be3e",false,undefined,!0,void 0,void 0,s);var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}})])}};function c(t){const e=[];return Array.from(t).forEach(t=>{let a=[];Array.from(t.children).forEach(t=>a.push({value:t.innerHTML})),e.push(a)}),e}class Table extends t.Block{static get viewComponent(){return a}static get settingsComponent(){return i}static get icon(){return r}static defaultData(){return{caption:"",thead:!1,data:[[{value:""},{value:""}],[{value:""},{value:""}]]}}toHTML(){let t=this.thead&&[this.data[0]].reduce((t,e)=>t+"<tr>"+e.reduce((t,e)=>`${t}\n<th>${e.value}</th>`,"")+"</tr>",""),e=(this.thead?this.data.slice(1,this.data.length):this.data).reduce((t,e)=>t+"<tr>"+e.reduce((t,e)=>`${t}\n<td>${e.value}</td>`,"")+"</tr>","");return t?(t=`<thead>${t}</thead>`,e=`<tbody>${e}</tbody>`):t="",`<table>\n            <caption>${this.caption}</caption>\n            ${t}\n            ${e}\n        </table>`}static serializeFromHTML(t){const e=t.querySelector("table");if(!e)return this.defaultData();let a=e?e.caption:"";a&&(a=a.innerHTML);const n=[],o=!!e.tHead;return o&&n.push(c(e.tHead.children)[0]),Array.from(e.tBodies).forEach(t=>{n.push(...c(t.children))}),{caption:a,thead:o,data:n}}}return Table}));
